<section class="bookings-admin">
  <div class="lookup-card">
    <header>
      <h2>Booking lookup</h2>
      <button mat-button (click)="clear()">Clear</button>
    </header>

    <form [formGroup]="form" (ngSubmit)="lookup()">
      <mat-form-field appearance="outline">
        <mat-label>Booking ID</mat-label>
        <input matInput type="number" formControlName="bookingId" />
        <mat-error *ngIf="form.get('bookingId')?.hasError('required')">Booking ID is required.</mat-error>
      </mat-form-field>
      <button mat-raised-button color="primary" type="submit" [disabled]="loading">
        <mat-progress-spinner *ngIf="loading" diameter="20" mode="indeterminate"></mat-progress-spinner>
        <span *ngIf="!loading">Search</span>
      </button>
    </form>
  </div>

  <div class="result-card" *ngIf="booking; else prompt">
    <header>
      <h3>Booking #{{ booking.id }}</h3>
      <span class="status" [class.confirmed]="booking.status === 'Confirmed'">{{ booking.status }}</span>
    </header>
    <div class="detail">
      <mat-icon>movie</mat-icon>
      <div>
        <strong>{{ booking.movieTitle }}</strong>
        <span>{{ booking.screenName }}</span>
      </div>
    </div>
    <div class="detail">
      <mat-icon>schedule</mat-icon>
      <span>{{ booking.startsAtUtc | date: 'MMM d, h:mm a' }}</span>
    </div>
    <div class="detail">
      <mat-icon>event_seat</mat-icon>
      <span>{{ seatList() }}</span>
    </div>
    <div class="detail total">
      <span>Total amount</span>
      <strong>&#8377;{{ booking.totalAmount | number: '1.0-0' }}</strong>
    </div>
  </div>

  <ng-template #prompt>
    <div class="placeholder">Enter a booking ID to view its details.</div>
  </ng-template>
</section>
